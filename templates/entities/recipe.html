{% extends "base_generic.html" %}

{% block content %}
    <h1>Recipe page</h1>

    {% if recipe %}
      <ul>
        <li>Title: {{ recipe.name }}</li>
        <li>Description: {{ recipe.description }}</li>
        <li>Created at: {{ recipe.created_at }}</li>
        <li>Category: {{ recipe.category }}</li>
      </ul>
      <button type="submit" onclick="deleteRecipe({{ recipe.id }}, '{{ auth_token }}')" class="deletebtn">Delete</button>
      
      <script>
        function deleteRecipe(id, authToken) {
          fetch('/api/recipes/' + id,  {
            headers: {
              'Authorization': 'Token ' + authToken
            },
            method: 'DELETE'
          })

          window.location.assign("/");
        }
      </script>
      {% else %}
      <p>Recipe not found..</p>
    {% endif %}
{% endblock %}



